/*! This file is created by fangbao */
webpackJsonp([4],{172:function(t,e,a){a(184);var s=a(0)(a(178),a(190),"data-v-43eb85e3",null);s.options.__file="E:\\项目\\wanglibao\\BBS\\src\\views\\personInfoEdit.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),s.options.functional,t.exports=s.exports},178:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(5),n=a(8),i=a(7),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={components:{WlbHeader:s.WlbHeader,SelectAvatar:s.SelectAvatar},data:function(){return{userInfo:{},allHeadImgs:{},nickname:"",changed:!1,index:1}},computed:{},created:function(){var t=this;n.loading.show(!0,"full"),this.$http([{url:this.$api.api_list,method:"getBbsUserInfo",params:[{}]},{url:this.$api.api_list,method:"getBbsUserAllHeadImg",params:[{}]}]).then(function(e){t.userInfo=e[0].data.result.data,t.allHeadImgs=e[1].data.result.data,setTimeout(function(){t.changed=!1},0),n.loading.show(!1)})},mounted:function(){var t=this;o.default.$on("select-avatar",function(e){t.userInfo.head_img=t.allHeadImgs[e],t.index=e})},watch:{userInfo:{deep:!0,handler:function(t){this.changed=!0}}},methods:{editAvatar:function(){o.default.$emit("show-select-avatar-page")},save:function(){this.changed&&(this.changed=!1,n.loading.show(!0),this.$http([{url:this.$api.api_list,method:"updateBbsUserHeadimg",params:[{head_img:this.index}]},{url:this.$api.api_list,method:"updateBbsUserNickname",params:[{nickname:this.userInfo.nickname}]}]).then(function(t){n.loading.show(!1),n.ruleModal.show({content:"信息修改成功",style:"text-align: center"})}))}},destroyed:function(){o.default.$off("show-select-avatar-page")}}},184:function(t,e){},190:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view"},[a("wlb-header",[a("span",{slot:"title"},[t._v("个人中心")])]),t._v(" "),a("div",{staticClass:"edit-section"},[a("div",{staticClass:"item",on:{click:function(e){t.editAvatar()}}},[a("span",{staticClass:"photo-title"},[t._v("头像")]),t._v(" "),a("div",{staticClass:"photo-right fr"},[a("span",{staticClass:"right fr"}),t._v(" "),a("img",{staticClass:"photo fr",attrs:{src:t.userInfo.head_img}})])]),t._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"name-title fl"},[t._v("昵称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.nickname,expression:"userInfo.nickname"}],staticClass:"name-right fr",domProps:{value:t.userInfo.nickname},on:{input:function(e){e.target.composing||(t.userInfo.nickname=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"edit-btn"},[a("button",{class:["btn",{changed:t.changed}],on:{click:t.save}},[t._v("保存")])]),t._v(" "),a("select-avatar",{attrs:{data:t.allHeadImgs}})],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});