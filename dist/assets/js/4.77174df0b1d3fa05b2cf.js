/*! This file is created by fangbao */
webpackJsonp([4],{577:function(e,t,a){a(593);var s=a(5)(a(586),a(603),"data-v-43eb85e3",null);s.options.__file="/Users/gaoyanru/Documents/wanglibao/BBS/src/views/personInfoEdit.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__esModule"!==e}),s.options.functional,e.exports=s.exports},586:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var s=a(134),n=a(63),i=a(62),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={components:{WlbHeader:s.WlbHeader,SelectAvatar:s.SelectAvatar,ScrollWrapper:s.ScrollWrapper},data:function(){return{userInfo:{},allHeadImgs:{},nickname:"",changed:!1,index:1}},computed:{},created:function(){var e=this;n.loading.show(!0,"full"),this.$http([{url:this.$api.api_list,method:"getBbsUserInfo",params:[{}]},{url:this.$api.api_list,method:"getBbsUserAllHeadImg",params:[{}]}]).then(function(t){e.userInfo=t[0].data.result.data,e.allHeadImgs=t[1].data.result.data,setTimeout(function(){e.changed=!1},0),n.loading.show(!1)})},mounted:function(){var e=this;r.default.$on("select-avatar",function(t){e.userInfo.head_img=e.allHeadImgs[t],e.index=t})},watch:{userInfo:{deep:!0,handler:function(e){this.changed=!0}}},methods:{editAvatar:function(){e("input").blur(),r.default.$emit("show-select-avatar-page")},save:function(){this.changed&&(this.changed=!1,n.loading.show(!0),this.$http([{url:this.$api.api_list,method:"updateBbsUserHeadimg",params:[{head_img:this.index}]},{url:this.$api.api_list,method:"updateBbsUserNickname",params:[{nickname:this.userInfo.nickname}]}]).then(function(e){n.loading.show(!1);var t;if(e[1].data.result){var a=e[1].data.result.code;t=e[1].data.result.data,0===a?n.ruleModal.show({content:"信息修改成功",style:"text-align: center"}):n.ruleModal.show({content:t,style:"text-align: center"})}e[1].data.error&&(t=e[1].data.error.message,n.ruleModal.show({content:t,style:"text-align: center"}))}))}},destroyed:function(){r.default.$off("show-select-avatar-page")}}}).call(t,a(35))},593:function(e,t){},603:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"view"},[s("wlb-header",[s("span",{slot:"title"},[e._v("个人中心")])]),e._v(" "),s("scroll-wrapper",[s("div",{staticClass:"scroll"},[s("div",{staticClass:"edit-section"},[s("div",{staticClass:"item",on:{click:function(t){e.editAvatar()}}},[s("span",{staticClass:"photo-title"},[e._v("头像")]),e._v(" "),s("div",{staticClass:"photo-right fr"},[s("span",{staticClass:"right fr"}),e._v(" "),s("img",{directives:[{name:"lazyload",rawName:"v-lazyload",value:{placeholder:a(70)},expression:"{ placeholder: require('../imgs/avatar_defult_big.png') }"}],staticClass:"photo fr",attrs:{src:e.userInfo.head_img}})])]),e._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"name-title fl"},[e._v("昵称")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.nickname,expression:"userInfo.nickname"}],staticClass:"name-right fr",domProps:{value:e.userInfo.nickname},on:{input:function(t){t.target.composing||(e.userInfo.nickname=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"edit-btn"},[s("button",{class:["btn",{changed:e.changed}],on:{click:e.save}},[e._v("保存")])])])]),e._v(" "),s("select-avatar",{attrs:{data:e.allHeadImgs}})],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});