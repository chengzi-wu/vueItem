/*! This file is created by fangbao */
webpackJsonp([8],{572:function(t,e,n){n(591);var a=n(5)(n(581),n(601),"data-v-104766b0",null);a.options.__file="/Users/gaoyanru/Documents/wanglibao/BBS/src/views/TopicAdd.vue",a.esModule&&Object.keys(a.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),a.options.functional,t.exports=a.exports},581:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(134),i=n(29),o=n(90);e.default={components:{WlbHeader:a.WlbHeader},data:function(){return{active:!0,title:"",content:"",num:500,publicEnd:!0,open:!1,ThreadSectionList:[],boardName:""}},created:function(){var t=this;this.$plugin.loading.show(!0,"full"),this.$http({url:this.$api.api_list,method:"getBbsThreadSectionList",params:[{}]}).then(function(e){if(t.$plugin.loading.show(!1),e.data.result.data){for(var n in e.data.result.data)t.ThreadSectionList[e.data.result.data[n].id]=e.data.result.data[n];t.ThreadSectionList[t.$route.params.id]&&t.ThreadSectionList[t.$route.params.id].name?t.boardName=t.ThreadSectionList[t.$route.params.id].name:t.$router.replace({name:"index"})}else t.$router.replace({name:"index"})}),this.$route.params.id||this.$router.replace({name:"index"})},mounted:function(){},methods:{checkType:function(t){this.active=t},toPublic:function(){var t=this;this.content=this.content.toString(),!1!==this.publicEnd&&""!==this.content&&(this.publicEnd=!1,this.$http({url:this.$api.api_list,method:"BbsPublishThread",params:[{type_id:this.$route.params.id,title:"网利社区",content:this.content}]}).then(function(e){if(t.publicEnd=!0,e.data.result&&0===e.data.result.code)(0,o.Toast)({message:e.data.result.message,duration:1500}),setTimeout(function(){t.$router.push({name:"index"})},1e3);else if(e.data.error&&4004===e.data.error.code)(0,o.Toast)({message:"用户未登录，请登陆后进行发帖",duration:1500}),setTimeout(function(){i.wlb.ready({app:function(t){t.loginApp({refresh:1,url:window.location.href+""})},other:function(){window.location.href=i.api.host+"/wechat/verify?next="+window.location.href+"?source=app"}})},1e3);else{var n=e.data.error.message;(0,o.Toast)({message:n,duration:1500}),setTimeout(function(){t.$router.push({name:"index"})},1e3)}}))}},watch:{content:function(){var t=this.content.length;this.num=500-t>0?500-t:0,this.content=this.content.substring(0,500)}}}},591:function(t,e){},601:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view"},[n("wlb-header",{attrs:{options:{title:t.boardName}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"textarea",staticClass:"topic-text-content",attrs:{placeholder:"请输入发帖内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}}),t._v(" "),n("div",{staticClass:"topic-footer"},[n("span",{staticClass:"residue"},[t._v("你还可以输入"+t._s(t.num)+"字")]),t._v(" "),n("div",{class:["btn",{disable:!t.publicEnd||!t.content}],on:{click:t.toPublic}},[n("span",[t._v(t._s(t.publicEnd?"发表":"发表中..."))])])])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});